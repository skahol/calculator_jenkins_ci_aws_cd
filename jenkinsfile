pipeline{
    agent {
        docker {
            image 'ubuntu:latest'
        }
    }
    stages {
        stage('unit-testing'){
            steps{
                sh 'python calcu/test.py'
            }
        }
        stage('build-package'){
            steps{
                sh """
                sam package --template-file cft.yaml --s3-bucket saksham2 --output-template-file packaged-lambda.yaml
                """
            }
        }
        stage('deploy'){
            steps{
                sh """
                sam deploy --template-file packaged-lambda.yaml --stack-name JenkinPipelineCalculatorApp --capabilities CAPABILITY_IAM
                """
            }
        }
    }
}

